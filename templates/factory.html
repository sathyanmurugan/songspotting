{% extends "base.html" %}
{% block body %}

<style type="text/css">
.table-fixed thead {
  width: 97%;
}
.table-fixed tbody {
  height: 230px;
  overflow-y: auto;
  width: 100%;
}

</style>


<div class="inner cover">
  <h1 class="cover-heading">My Playlists<br></h1>
  <div class="container-fluid">
	<button type="button" class="btn btn-success" data-toggle="modal" data-target="#addPlaylistModal">
	  Create New Playlist
	</button>
	</div>
<div class="container-fluid">
<table class="table table-fixed">

  <tbody>
  {% for playlist in playlists %}
    <tr>
      <td>{{playlist.playlist_name}}</td>
      <td>{{playlist.playlist_seed}}</td>
      <td>{{playlist.seed_attributes}}</td>
      <td><button type="button" class="btn btn-success btn-sm">View on Spotify</button>  <button type="button" class="btn btn-danger btn-sm">Delete</button> </td>
    </tr>
   {% endfor %}
  </tbody>
</table>
</div>

<script>
$(document).ready(function() {
$(function() {
    $('#createPlaylistSubmitButton').click(function() {
        $.ajax({
            url: '/createPlaylist',
            data: $('#createPlaylistForm').serialize(),
            type: 'POST',
            success: function(response) {
                console.log(response);
            },
            complete: function(){
            	location.reload();
            }
        });
        
    });
});
});
/**function closeModal() {
	$('#addPlaylistModal').modal('hide');
}**/

</script>

<!-- add Playlist Modal -->
<div class="modal fade" id="addPlaylistModal" tabindex="-1" role="dialog">
<div class="modal-dialog">
  <div class="modal-content" align="center" style="background-color: #565656">
    <h3><br>Add A New Playlist<br><br></h3>


    <form id="createPlaylistForm" action="/factory" method="post" role="form">

        <div class="form-group">
          <div class="col-10">
            <input class="form-control" type="text" name="playlistName" placeholder="Name your playlist" required>
          </div>
        </div>
        <div class="form-group">
            <div class="col-10">
			  <select class="form-control" name="seedType" required>
			    <option value="" disabled selected>Find songs based on...</option>
			    <option value="favoriteTracks">My most played tracks</option>
			    <option value="favoriteArtists">My most played artists</option>
			  <!-- <option value="genre">genres</option>
			    <option value="myPlaylist">one of my playlists</option> -->
			  </select>
			</div>  
		</div> 
        <div class="form-group">
            <div class="col-10">
			  <select class="form-control" name="timeFrame" required>
			    <option value="" disabled selected>Select Timeframe</option>
			    <option value="short_term">Short Term</option>
			    <option value="medium_term">Medium Term</option>
			    <option value="long_term">Long Term</option>
			  <!-- <option value="genre">genres</option>
			    <option value="myPlaylist">one of my playlists</option> -->
			  </select>
			</div>  
		</div> 		

         <button id='createPlaylistSubmitButton' type="submit" class="btn btn-success">Submit</button>
      <br>
      <br>
    </form>

  </div>
</div>
</div>


</div>

{% endblock %}
